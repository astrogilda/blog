---
title: "Structured Logging 101 – From Opaque Strings to Queryable Events"
description: "Why unstructured logs are technical debt and how to adopt structlog for machine‑readable observability in Python ML systems."
slug: "structured-logging-with-structlog-guide"
date: 2025-06-18
tags: ["python", "logging", "structlog", "observability"]
---

## 1 · The hidden cost of `print()` in production

Unstructured logs (`print()`, `logging.warning("%s", var)`) are **easy to write** but **hard to parse**:

* Require brittle regex to extract `user_id`, `event_type`, etc.  
* Break silently when a developer changes wording.  
* Slow ingestion pipelines—regex on billions of lines is CPU‑heavy.

> In modern ML micro‑services, unreadable logs = delayed incident diagnosis & wasted engineering hours.

---

## 2 · Logs as structured data

### 2.1 Paradigm shift

```python
# unstructured
logging.warning("Login failed for user %s", user_id)

# structured
import structlog
log = structlog.get_logger()
log.warning("login_failed", user_id=user_id, source_ip=ip)
```

*Event name* + **key‑value context** → directly queryable in Datadog, Splunk, ELK.

---

## 3 · A production‑ready `structlog` config

`src/logging_config.py`

```python
import logging
import os
import sys
import structlog

def configure_logging() -> None:
    """
    Initialise dual‑mode (dev vs prod) structured logging.
    """
    log_level      = os.getenv("LOG_LEVEL", "INFO").upper()
    is_production  = os.getenv("ENV", "development") == "production"

    # processors applied in both environments
    shared = [
        structlog.contextvars.merge_contextvars,
        structlog.processors.add_log_level,
        structlog.processors.TimeStamper(fmt="iso"),
    ]

    if is_production:
        processors = shared + [
            structlog.processors.format_exc_info,
            structlog.processors.JSONRenderer()
        ]
        logging.basicConfig(format="%(message)s", stream=sys.stdout, level=log_level)
    else:
        processors = shared + [
            structlog.dev.ConsoleRenderer(colors=True)
        ]
        logging.basicConfig(stream=sys.stdout, level=log_level)

    structlog.configure(
        processors=processors,
        wrapper_class=structlog.make_filtering_bound_logger(log_level),
        logger_factory=structlog.stdlib.LoggerFactory(),
        cache_logger_on_first_use=True,
    )
```

---

## 4 · Next up

In the next post we’ll migrate an existing codebase **in &lt; 15 min** using Copilot for bulk edits + Ruff for instant lint/fix.

---

> **Grab the runnable config** → [Download logging_config.py](https://your-download-link.com/logging_config.py)  
> **Need structured logging now?** Book a 20-min consult → [https://calendly.com/your-link](https://calendly.com/your-link)
